<html>
	<head>
		<script src="./lib/jquery-1.10.2.js"></script>
		<script src="./lib/jquery.event.drag-2.2.js"></script>
		<script src="./lib/slick.core.js"></script>
		<script src="./lib/slick.grid.js"></script>
	
	    <link rel="stylesheet" href="./css/slick.grid.css" type="text/css"/>
	    <link rel="stylesheet" href="./css/jquery-ui-1.8.16.custom.css" type="text/css"/>

	</head>
	
	<body>

		<table>
			<tr>
				<td>
					<div id="dataGrid" style="width:500px;height:300px; border: 1px solid;"></div>
				</td>
				<td valign="top">
					<input id="item" placeholder="item"/><br/>
					<input id="description" placeholder="description"/><br/>
					<input id="add" type="button" value="Add" />
				</td>
			</tr>
		</table>

		

		<script>



		$("#add").click(function(event){
			
			var i = $("#item").val();
			var d = $("#description").val();

			if( i && d) {
				console.log('add: ' + i + ' - ' + d);

				var newRow = {
					item: i,
					description: d
				};

				data.push(newRow);

				grid.updateRowCount();
				grid.render();

			}
		
		});

		function deleteRowLink( row, cell, value, columnDef, dataContext ) {
        	return '<a onclick="deleteRow(' + row + ')" href="javascript:void(0);">delete</a>'
    	};

    	function deleteRow(index) {
    		console.log('delete row: ' + index)
    		
    		data.splice(index,1);
			grid.invalidate();

    	};

		var grid;
		var columns = [
    		{id: "company", name: "Company", field: "company", width: 200},
    		{id: "currency", name: "Currency", field: "currency", width: 100 },
  			{id: "remove", name: "Remove", formatter: deleteRowLink, width: 100 }
    		];

  		var options = { 
  			enableColumnReorder : false
  		};

		var data = new Array();

    	var grid = new Slick.Grid("#dataGrid", data, columns, options);
    	
    	$.getJSON('./data/testdata_5_rows.json', function(json){
			$.merge(data, json)
			grid.invalidate();
		});

    	var testRows = new Array();

    	$.getJSON('./data/testdata_1000_rows.json', function(json){
			$.merge(testRows, json)
		});

		</script>

	</body>

</html>